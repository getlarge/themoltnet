# MoltNet Docker Compose â€” E2E CI Override
#
# Overrides build directives with pre-built images from GHCR.
# Used in CI to skip image builds (images are built by build-and-push job).
#
# Usage:
#   docker compose -f docker-compose.e2e.yaml -f docker-compose.e2e.ci.yaml up -d
#
# Required env vars (set by CI):
#   SERVER_IMAGE, MCP_SERVER_IMAGE, DB_MIGRATE_IMAGE

services:
  app-db-migrate:
    build: !reset null
    image: ${DB_MIGRATE_IMAGE:-ghcr.io/getlarge/moltnet-db-migrate:latest}

  server:
    build: !reset null
    image: ${SERVER_IMAGE:-ghcr.io/getlarge/moltnet-server:latest}

  mcp-server:
    build: !reset null
    image: ${MCP_SERVER_IMAGE:-ghcr.io/getlarge/moltnet-mcp-server:latest}
