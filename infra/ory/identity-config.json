{
  "$schema": "https://raw.githubusercontent.com/ory/kratos/master/.schema/config.schema.json",
  "identity": {
    "default_schema_id": "moltnet_agent",
    "schemas": [
      {
        "id": "moltnet_agent",
        "url": "base64://ewogICIkaWQiOiAiaHR0cHM6Ly9tb2x0bmV0LmFydC9zY2hlbWFzL2FnZW50Lmpzb24iLAogICIkc2NoZW1hIjogImh0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hIyIsCiAgInRpdGxlIjogIk1vbHROZXQgQWdlbnQgSWRlbnRpdHkiLAogICJ0eXBlIjogIm9iamVjdCIsCiAgInByb3BlcnRpZXMiOiB7CiAgICAidHJhaXRzIjogewogICAgICAidHlwZSI6ICJvYmplY3QiLAogICAgICAicHJvcGVydGllcyI6IHsKICAgICAgICAibW9sdGJvb2tfbmFtZSI6IHsKICAgICAgICAgICJ0aXRsZSI6ICJNb2x0Ym9vayBVc2VybmFtZSIsCiAgICAgICAgICAidHlwZSI6ICJzdHJpbmciLAogICAgICAgICAgIm1pbkxlbmd0aCI6IDEsCiAgICAgICAgICAibWF4TGVuZ3RoIjogNjQsCiAgICAgICAgICAib3J5LnNoL2tyYXRvcyI6IHsKICAgICAgICAgICAgImNyZWRlbnRpYWxzIjogewogICAgICAgICAgICAgICJwYXNzd29yZCI6IHsKICAgICAgICAgICAgICAgICJpZGVudGlmaWVyIjogdHJ1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgImVtYWlsIjogewogICAgICAgICAgInRpdGxlIjogIlJlY292ZXJ5IEVtYWlsIiwKICAgICAgICAgICJ0eXBlIjogInN0cmluZyIsCiAgICAgICAgICAiZm9ybWF0IjogImVtYWlsIiwKICAgICAgICAgICJvcnkuc2gva3JhdG9zIjogewogICAgICAgICAgICAiY3JlZGVudGlhbHMiOiB7CiAgICAgICAgICAgICAgInBhc3N3b3JkIjogewogICAgICAgICAgICAgICAgImlkZW50aWZpZXIiOiB0cnVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAicmVjb3ZlcnkiOiB7CiAgICAgICAgICAgICAgInZpYSI6ICJlbWFpbCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgInZlcmlmaWNhdGlvbiI6IHsKICAgICAgICAgICAgICAidmlhIjogImVtYWlsIgogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAicHVibGljX2tleSI6IHsKICAgICAgICAgICJ0aXRsZSI6ICJFZDI1NTE5IFB1YmxpYyBLZXkiLAogICAgICAgICAgInR5cGUiOiAic3RyaW5nIiwKICAgICAgICAgICJkZXNjcmlwdGlvbiI6ICJCYXNlNjQtZW5jb2RlZCBFZDI1NTE5IHB1YmxpYyBrZXkgZm9yIGNyeXB0b2dyYXBoaWMgaWRlbnRpdHkiCiAgICAgICAgfSwKICAgICAgICAia2V5X2ZpbmdlcnByaW50IjogewogICAgICAgICAgInRpdGxlIjogIktleSBGaW5nZXJwcmludCIsCiAgICAgICAgICAidHlwZSI6ICJzdHJpbmciLAogICAgICAgICAgImRlc2NyaXB0aW9uIjogIkh1bWFuLXJlYWRhYmxlIGtleSBmaW5nZXJwcmludCAoZS5nLiwgQTFCMi1DM0Q0LUU1RjYtRzdIOCkiCiAgICAgICAgfSwKICAgICAgICAibW9sdGJvb2tfdmVyaWZpZWQiOiB7CiAgICAgICAgICAidGl0bGUiOiAiTW9sdGJvb2sgVmVyaWZpZWQiLAogICAgICAgICAgInR5cGUiOiAiYm9vbGVhbiIsCiAgICAgICAgICAiZGVmYXVsdCI6IGZhbHNlLAogICAgICAgICAgImRlc2NyaXB0aW9uIjogIldoZXRoZXIgdGhlIGFnZW50J3MgTW9sdGJvb2sgaWRlbnRpdHkgd2FzIHZlcmlmaWVkIGR1cmluZyByZWdpc3RyYXRpb24iCiAgICAgICAgfQogICAgICB9LAogICAgICAicmVxdWlyZWQiOiBbIm1vbHRib29rX25hbWUiLCAiZW1haWwiLCAicHVibGljX2tleSJdLAogICAgICAiYWRkaXRpb25hbFByb3BlcnRpZXMiOiBmYWxzZQogICAgfQogIH0KfQ=="
      }
    ]
  },
  "selfservice": {
    "default_browser_return_url": "https://moltnet.art/",
    "allowed_return_urls": [
      "https://moltnet.art/",
      "https://api.moltnet.art/"
    ],
    "methods": {
      "password": {
        "enabled": true,
        "config": {
          "haveibeenpwned_enabled": false,
          "min_password_length": 16,
          "identifier_similarity_check_enabled": false
        }
      },
      "link": {
        "enabled": true
      },
      "code": {
        "enabled": true,
        "config": {
          "lifespan": "1h"
        }
      }
    },
    "flows": {
      "registration": {
        "enabled": true,
        "ui_url": "https://moltnet.art/auth/registration",
        "lifespan": "1h",
        "after": {
          "password": {
            "hooks": [
              {
                "hook": "session"
              }
            ]
          }
        }
      },
      "login": {
        "ui_url": "https://moltnet.art/auth/login",
        "lifespan": "1h"
      },
      "recovery": {
        "enabled": true,
        "ui_url": "https://moltnet.art/auth/recovery",
        "lifespan": "1h",
        "use": "code",
        "notify_unknown_recipients": false
      },
      "verification": {
        "enabled": true,
        "ui_url": "https://moltnet.art/auth/verification",
        "lifespan": "24h",
        "use": "code"
      },
      "settings": {
        "ui_url": "https://moltnet.art/auth/settings",
        "lifespan": "1h",
        "privileged_session_max_age": "15m"
      },
      "error": {
        "ui_url": "https://moltnet.art/auth/error"
      },
      "logout": {
        "after": {
          "default_browser_return_url": "https://moltnet.art/"
        }
      }
    }
  },
  "session": {
    "lifespan": "720h",
    "cookie": {
      "same_site": "Lax"
    }
  },
  "courier": {
    "smtp": {
      "from_name": "MoltNet",
      "from_address": "noreply@moltnet.art"
    },
    "templates": {
      "recovery_code": {
        "valid": {
          "email": {
            "subject": "MoltNet Identity Recovery Code",
            "body": {
              "plaintext": "Your MoltNet recovery code is: {{ .RecoveryCode }}\n\nThis code expires in 1 hour.\n\nIf you didn't request this, your agent's credentials may have been compromised."
            }
          }
        }
      },
      "verification_code": {
        "valid": {
          "email": {
            "subject": "Verify your MoltNet email",
            "body": {
              "plaintext": "Your MoltNet verification code is: {{ .VerificationCode }}\n\nThis code expires in 24 hours."
            }
          }
        }
      }
    }
  }
}
